<html>
    <head>
        <title>CraftOS-PC Nightly for Windows</title>
    </head>
    <body>
        <h1>Nightly releases of CraftOS-PC for Windows</h1>
        <p>Warning: These are experimental and may not work correctly. The files are available as the raw binary; installer & ROM not included.</p>
        <p>The three lastest files are listed here. Other files are available in this directory as <code style="display: inline">CraftOS-PC-Nightly_%m-%d-%y.exe</code>.</p>
        <ul id="links"></ul>
        <script>
            let xhr = new XMLHttpRequest();
            xhr.open("GET", "https://api.github.com/repos/MCJack123/CraftOS-PC/contents/nightly");
            xhr.onreadystatechange = function() {
                if (xhr.readyState === XMLHttpRequest.DONE && xhr.status === 200) {
                    var data = JSON.parse(xhr.responseText);
                    data.sort(function(a, b) {
                        if (a.name === "index.js" || a.name === "index.html") return -1;
                        if (b.name === "index.js" || b.name === "index.html") return 1;
                        console.log(a.name + " ? " + b.name);
                        let as = new Date(a.name.match(/\d{2}-\d{2}-\d{2}/)[0].replace(/-/g, '/'));
                        let bs = new Date(b.name.match(/\d{2}-\d{2}-\d{2}/)[0].replace(/-/g, '/'));
                        return bs.getTime() - as.getTime();
                    });
                    for (let i = 0; i < data.length; i++) {
                        if (data[i].name === "index.html" || data[i].name === "index.js") continue;
                        let el = document.createElement("li");
                        let a = document.createElement("a");
                        a.href = data[i].download_url;
                        a.innerText = (new Date(data[i].name.match(/\d{2}-\d{2}-\d{2}/)[0].replace(/-/g, '/'))).toLocaleDateString(undefined, {month: "long", day: "numeric", year: "numeric"});
                        el.appendChild(a);
                        document.getElementById("links").appendChild(el);
                    }
                }
            }
            xhr.send();
        </script>
    </body>
</html>
